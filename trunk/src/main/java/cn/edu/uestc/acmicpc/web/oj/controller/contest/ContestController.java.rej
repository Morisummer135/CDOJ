diff a/trunk/src/main/java/cn/edu/uestc/acmicpc/web/oj/controller/contest/ContestController.java b/trunk/src/main/java/cn/edu/uestc/acmicpc/web/oj/controller/contest/ContestController.java	(rejected hunks)
@@ -7,6 +7,8 @@ import java.util.Map;
 
 import javax.servlet.http.HttpSession;
 
+import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.stereotype.Controller;
 import org.springframework.ui.ModelMap;
 import org.springframework.web.bind.annotation.PathVariable;
 import org.springframework.web.bind.annotation.RequestBody;
@@ -15,10 +17,12 @@ import org.springframework.web.bind.annotation.ResponseBody;
 
 import cn.edu.uestc.acmicpc.db.condition.impl.ContestCondition;
 import cn.edu.uestc.acmicpc.db.condition.impl.ProblemCondition;
-import cn.edu.uestc.acmicpc.db.dto.impl.contest.ContestShowDTO;
+import cn.edu.uestc.acmicpc.db.dto.impl.contest.ContestProblemDTO;
+import cn.edu.uestc.acmicpc.db.dto.impl.contest.ContestStatusShowDTO;
 import cn.edu.uestc.acmicpc.db.dto.impl.contest.ContestListDTO;
 import cn.edu.uestc.acmicpc.db.dto.impl.problem.ProblemListDTO;
 import cn.edu.uestc.acmicpc.db.dto.impl.user.UserDTO;
+import cn.edu.uestc.acmicpc.service.iface.ContestProblemService;
 import cn.edu.uestc.acmicpc.service.iface.ContestService;
 import cn.edu.uestc.acmicpc.service.iface.LanguageService;
 import cn.edu.uestc.acmicpc.util.Global;
@@ -27,21 +31,33 @@ import cn.edu.uestc.acmicpc.util.exception.AppException;
 import cn.edu.uestc.acmicpc.web.oj.controller.base.BaseController;
 import cn.edu.uestc.acmicpc.web.view.PageInfo;
 
+/**
+ * 
+ * @author liverliu
+ *
+ */
+@Controller
 @RequestMapping("/contest")
 public class ContestController extends BaseController{
   
   private ContestService contestService;
   private LanguageService languageService;
+  private ContestProblemService contestProblemService;
 
-  
+  @Autowired
   public void setContestService(ContestService contestService) {
     this.contestService = contestService;
   }
   
+  @Autowired
   public void setLanguageService(LanguageService languageService) {
     this.languageService = languageService;
   }
-
+  
+  @Autowired
+  public void setContestProblemService(ContestProblemService contestProblemService) {
+    this.contestProblemService = contestProblemService;
+  }
 
   /**
    * Show a contest.
@@ -54,12 +70,15 @@ public class ContestController extends BaseController{
   @LoginPermit(NeedLogin = false)
   public String show(@PathVariable("contestId") Integer contestId, ModelMap model) {
     try {
-      ContestShowDTO contestShowDTO = contestService.getContestDTOByContestId(contestId);
-      if(contestShowDTO == null) {
+      ContestStatusShowDTO contestStatusShowDTO = contestService.
+          getcontestStatusShowDTOByContestId(contestId);
+      if(contestStatusShowDTO == null) {
         throw new AppException("NO such contest");
       }
-      model.put("targetcontest", contestShowDTO);
-      model.put("brToken", "\n");
+      List<ContestProblemDTO> contestProblemList = contestProblemService.
+          getContestProblemDTOListByContestId(contestId);
+      model.put("targetcontest", contestStatusShowDTO);
+      model.put("contestProblems", contestProblemList);
       model.put("languageList", languageService.getLanguageList());
     }catch (AppException e){
       return "error/404";
